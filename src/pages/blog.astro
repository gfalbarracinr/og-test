---
import { getCollection } from "astro:content";
import BlogPostEntries from "src/components/blog/BlogPostEntries.astro";
import BlogLayout from "src/layouts/BlogLayout.astro";
import { BLOG_ENABLED } from "src/feature_flags";

const blogCollection = await getCollection("blog");

blogCollection.sort((a, b) => {
  return b.data.date.getTime() - a.data.date.getTime();
});

if (!BLOG_ENABLED) {
  Astro.response.status = 404;
}
---

<style>
  .container {
    display: flex;
    max-height: 550px;
    min-height: 440px;
    width: 100%;
    background-color: transparent;
    overflow: hidden;
    margin-bottom: 36px;
  }

  .text-section {
    box-sizing: border-box;
    background-color: #97639D;
    color: white;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 72px;
    width: 50%;
  }

  .text-container {
    display: flex;
    flex-direction: column;
    gap: 24px;
    max-width: 400px;
  }

  .text-container h1 {
    font-size: 2.25rem;
    font-weight: 600;
    margin: 0;
  }

  .text-container p {
    line-height: 1.85rem;
    margin: 0;
  }

  .image-section {
    box-sizing: border-box;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 50%;
  }

  .image-section img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  @media screen and (max-width: 1279px) {
    .text-section {
      padding: 40px;
    }

    .text-container {
      max-width: 550px;
    }
  }

  @media screen and (max-width: 844px) {
    .text-section {
      padding: 20px;
      width: 100%;
    }

    .text-container {
      max-width: 100%;
    }

    .image-section {
      display: none;
    }
  }
</style>

<BlogLayout title="Blog - Ekumen">
  <div class="container">
    <section class="text-section">
      <div class="text-container">
        <h1>Our Blog</h1>
        <p>Dive into a dynamic space where we share the latest company insights, industry trends, and the most recent research and development articles from our team. Join us to explore new ideas and stay updated on the latest advancements in robotics.</p>
      </div>
    </section>
    <section class="image-section">
      <img src="/images/computer.jpeg" alt="Person typing on a laptop">
    </section>
  </div>

  <BlogPostEntries entries={blogCollection} />
</BlogLayout>
